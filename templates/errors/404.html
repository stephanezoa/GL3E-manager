{% extends "base.html" %}

{% block title %}404 - Page introuvable{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center px-4 relative overflow-hidden">
    <!-- Animated background grid -->
    <div class="absolute inset-0 opacity-20 pointer-events-none">
        <div class="animate-grid-scroll w-full h-full" style="background-image: linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px); background-size: 50px 50px;"></div>
    </div>

    <!-- Floating code snippets -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none hidden sm:block">
        <div class="absolute top-[10%] left-[10%] text-xs font-mono text-blue-400/30 animate-float-code whitespace-nowrap">if (page.exists()) {</div>
        <div class="absolute top-[20%] right-[15%] text-xs font-mono text-blue-400/30 animate-float-code-delay-1 whitespace-nowrap">return 404;</div>
        <div class="absolute bottom-[15%] left-[20%] text-xs font-mono text-blue-400/30 animate-float-code-delay-2 whitespace-nowrap">} catch(error) {</div>
        <div class="absolute bottom-[25%] right-[10%] text-xs font-mono text-blue-400/30 animate-float-code-delay-3 whitespace-nowrap">console.log("Not Found");</div>
    </div>

    <div class="max-w-2xl w-full relative z-10">
        <!-- Terminal window -->
        <div class="bg-gray-800 rounded-xl shadow-2xl overflow-hidden border border-gray-700 animate-slide-up">
            <!-- Terminal header -->
            <div class="bg-gray-900 px-4 py-3 flex items-center gap-2 border-b border-gray-700">
                <div class="flex gap-2">
                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                </div>
                <div class="flex-1 text-center">
                    <span class="text-gray-400 text-sm font-mono">error.log â€” bash</span>
                </div>
            </div>

            <!-- Terminal content -->
            <div class="p-6 sm:p-8 font-mono text-sm">
                <!-- Logo -->
                <div class="flex justify-center mb-6">
                    <div class="relative">
                        <img src="/static/img/image.png" alt="IAI" class="h-16 w-16 object-contain animate-pulse">
                        <div class="absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold animate-bounce">
                            !
                        </div>
                    </div>
                </div>

                <!-- Error message animation -->
                <div class="space-y-3">
                    <div class="flex items-start gap-2 text-gray-400">
                        <span class="text-green-400">$</span>
                        <span class="animate-typing overflow-hidden whitespace-nowrap border-r-2 border-green-400">npm run find-page</span>
                    </div>

                    <div class="animate-fade-in-left opacity-0" style="animation-delay: 2.5s; animation-fill-mode: both;">
                        <span class="text-red-400 font-bold">ERROR</span>
                        <span class="text-gray-300">: Page not found</span>
                    </div>

                    <div class="bg-gray-900 rounded-lg p-4 border border-red-900/30 animate-expand-error opacity-0" style="animation-delay: 3s; animation-fill-mode: both;">
                        <div class="flex items-start gap-2 mb-2">
                            <span class="text-red-400 text-lg animate-pulse">âœ—</span>
                            <div class="flex-1">
                                <p class="text-red-400 font-bold mb-1">HTTPException: 404</p>
                                <p class="text-gray-400 text-xs sm:text-sm mb-2">La ressource demandÃ©e est introuvable</p>
                                <div class="bg-gray-950 rounded px-3 py-2 mt-2">
                                    <p class="text-blue-300 text-xs break-all">
                                        <span class="text-gray-500">path:</span> "{{ path }}"
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Stack trace style -->
                    <div class="text-gray-500 text-xs space-y-1 pl-4 border-l-2 border-gray-700 animate-fade-in" style="animation-delay: 3.5s; animation-fill-mode: both;">
                        <div class="opacity-0 animate-fade-in" style="animation-delay: 3.6s; animation-fill-mode: both;">at Router.handleRequest()</div>
                        <div class="opacity-0 animate-fade-in" style="animation-delay: 3.8s; animation-fill-mode: both;">at Application.dispatch()</div>
                        <div class="opacity-0 animate-fade-in" style="animation-delay: 4s; animation-fill-mode: both;">at <span class="text-yellow-400">IAI-GL3E-System</span>.process()</div>
                    </div>

                    <!-- Suggestion -->
                    <div class="mt-4 p-3 bg-blue-900/20 border border-blue-700/30 rounded-lg opacity-0 animate-fade-in" style="animation-delay: 4.2s; animation-fill-mode: both;">
                        <div class="flex items-start gap-2">
                            <span class="text-blue-400 animate-bounce" style="animation-delay: 4.5s;">ðŸ’¡</span>
                            <div class="text-gray-300 text-xs">
                                <p class="font-bold mb-1">Suggestions:</p>
                                <p>â€¢ VÃ©rifiez l'URL saisie</p>
                                <p>â€¢ Retournez Ã  la page d'accueil</p>
                                <p>â€¢ Consultez la liste des projets</p>
                            </div>
                        </div>
                    </div>

                    <!-- Command prompt -->
                    <div class="flex items-center gap-2 text-gray-400 mt-6 opacity-0 animate-fade-in" style="animation-delay: 4.5s; animation-fill-mode: both;">
                        <span class="text-green-400">$</span>
                        <span class="animate-blink-cursor">_</span>
                    </div>
                </div>
            </div>

            <!-- Action buttons -->
            <div class="px-6 pb-6 flex flex-col sm:flex-row gap-3 opacity-0 animate-fade-in" style="animation-delay: 5s; animation-fill-mode: both;">
                <a href="/" 
                   class="flex-1 group relative overflow-hidden px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg text-white font-semibold text-center transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-blue-500/50">
                    <span class="relative z-10 flex items-center justify-center gap-2">
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:-translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                        </svg>
                        cd ~/ (Accueil)
                    </span>
                    <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-blue-600 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                </a>

                <a href="/projets-attribues" 
                   class="flex-1 group px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg text-white font-semibold text-center transition-all duration-300 hover:scale-105 hover:shadow-lg">
                    <span class="flex items-center justify-center gap-2">
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        ls projets/
                    </span>
                </a>
            </div>
        </div>

        <!-- Debug mode footer -->
        <div class="mt-6 text-center opacity-0 animate-fade-in" style="animation-delay: 5.5s; animation-fill-mode: both;">
            <p class="text-gray-400 text-xs font-mono flex items-center justify-center gap-2">
                <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                IAI-GL3E System v2.0.0 | Debug Mode: ON
            </p>
        </div>
    </div>
</div>

<style>
    /* Custom animations using Tailwind-compatible keyframes */
    
    @keyframes grid-scroll {
        0% { transform: translate(0, 0); }
        100% { transform: translate(50px, 50px); }
    }

    @keyframes float-code {
        0%, 100% { 
            transform: translateY(0) rotate(0deg); 
            opacity: 0; 
        }
        25%, 75% { 
            transform: translateY(-20px) rotate(2deg); 
        }
        50% { 
            opacity: 0.5; 
        }
    }

    @keyframes slide-up {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes typing {
        from { 
            max-width: 0; 
        }
        to { 
            max-width: 100%; 
        }
    }

    @keyframes fade-in-left {
        from {
            opacity: 0;
            transform: translateX(-10px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes expand-error {
        from {
            opacity: 0;
            transform: scaleY(0);
        }
        to {
            opacity: 1;
            transform: scaleY(1);
        }
    }

    @keyframes fade-in {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes blink-cursor {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
    }

    /* Apply animations */
    .animate-grid-scroll {
        animation: grid-scroll 20s linear infinite;
    }

    .animate-float-code {
        animation: float-code 8s ease-in-out infinite;
    }

    .animate-float-code-delay-1 {
        animation: float-code 8s ease-in-out infinite;
        animation-delay: 1s;
    }

    .animate-float-code-delay-2 {
        animation: float-code 8s ease-in-out infinite;
        animation-delay: 2s;
    }

    .animate-float-code-delay-3 {
        animation: float-code 8s ease-in-out infinite;
        animation-delay: 1.5s;
    }

    .animate-slide-up {
        animation: slide-up 0.6s ease-out;
    }

    .animate-typing {
        animation: typing 2s steps(20) 1s forwards;
        max-width: 0;
    }

    .animate-fade-in-left {
        animation: fade-in-left 0.5s ease-out forwards;
    }

    .animate-expand-error {
        animation: expand-error 0.5s ease-out forwards;
        transform-origin: top;
    }

    .animate-fade-in {
        animation: fade-in 0.5s ease-out forwards;
    }

    .animate-blink-cursor {
        animation: blink-cursor 1s step-end infinite;
    }

    /* Responsive text size adjustments */
    @media (max-width: 640px) {
        .font-mono {
            font-size: 0.875rem;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Console easter eggs
        console.log('%c404 ERROR', 'color: #ef4444; font-size: 24px; font-weight: bold; font-family: monospace;');
        console.log('%cPage not found in IAI-GL3E System', 'color: #60a5fa; font-size: 14px; font-family: monospace;');
        console.log('%cPath: {{ path }}', 'color: #94a3b8; font-size: 12px; font-family: monospace;');
        console.log('%câ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€', 'color: #374151;');
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ignore if user is typing in an input
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            
            // Press 'h' to go home
            if (e.key === 'h' || e.key === 'H') {
                window.location.href = '/';
            }
            // Press 'p' to go to projects
            if (e.key === 'p' || e.key === 'P') {
                window.location.href = '/projets-attribues';
            }
            // Press 'Escape' to go home
            if (e.key === 'Escape') {
                window.location.href = '/';
            }
        });

        // Show keyboard shortcuts in console after delay
        setTimeout(() => {
            console.log('%câŒ¨ï¸  Keyboard shortcuts:', 'color: #22c55e; font-weight: bold; font-family: monospace;');
            console.log('%c  h â†’ Go to home', 'color: #94a3b8; font-family: monospace;');
            console.log('%c  p â†’ View projects', 'color: #94a3b8; font-family: monospace;');
            console.log('%c  Esc â†’ Go to home', 'color: #94a3b8; font-family: monospace;');
        }, 3000);

        // Add glitch effect on logo hover
        const logo = document.querySelector('img[alt="IAI"]');
        if (logo) {
            logo.addEventListener('mouseenter', () => {
                logo.style.filter = 'hue-rotate(90deg)';
            });
            logo.addEventListener('mouseleave', () => {
                logo.style.filter = 'none';
            });
        }
    });
</script>
{% endblock %}